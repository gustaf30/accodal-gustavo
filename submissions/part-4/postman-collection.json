{
  "info": {
    "name": "Tax Document Processing API",
    "description": "Complete API collection for tax document processing including RAG search, KAG classification, and batch processing.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000/api/v1",
      "type": "string"
    },
    {
      "key": "bearerToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "apiKey",
      "value": "",
      "type": "string"
    }
  ],
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{bearerToken}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Health",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/health",
              "host": ["{{baseUrl}}"],
              "path": ["health"]
            }
          }
        }
      ]
    },
    {
      "name": "Search (RAG)",
      "item": [
        {
          "name": "Semantic Search",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"query\": \"W-2 wage information for 2024\",\n  \"threshold\": 0.7,\n  \"limit\": 10\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/search",
              "host": ["{{baseUrl}}"],
              "path": ["search"]
            }
          }
        },
        {
          "name": "Semantic Search (GET)",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/search?query=tax%20documents&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["search"],
              "query": [
                {
                  "key": "query",
                  "value": "tax%20documents"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          }
        },
        {
          "name": "Find Similar Documents",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/documents/:documentId/similar?limit=5",
              "host": ["{{baseUrl}}"],
              "path": ["documents", ":documentId", "similar"],
              "query": [
                {
                  "key": "limit",
                  "value": "5"
                }
              ],
              "variable": [
                {
                  "key": "documentId",
                  "value": ""
                }
              ]
            }
          }
        },
        {
          "name": "Check Inconsistencies",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/documents/:documentId/inconsistencies",
              "host": ["{{baseUrl}}"],
              "path": ["documents", ":documentId", "inconsistencies"],
              "variable": [
                {
                  "key": "documentId",
                  "value": ""
                }
              ]
            }
          }
        },
        {
          "name": "Metadata Search",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/documents/metadata?document_type=W-2&status=completed&limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["documents", "metadata"],
              "query": [
                {
                  "key": "document_type",
                  "value": "W-2"
                },
                {
                  "key": "status",
                  "value": "completed"
                },
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Classification (KAG)",
      "item": [
        {
          "name": "Classify Document (Text)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"W-2 Wage and Tax Statement 2024\\nEmployer: Acme Corp\\nEIN: 12-3456789\\nEmployee: John Smith\\nSSN: XXX-XX-1234\\nWages: $75,000.00\\nFederal Tax Withheld: $12,500.00\",\n  \"content_type\": \"text\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/classify",
              "host": ["{{baseUrl}}"],
              "path": ["classify"]
            }
          }
        },
        {
          "name": "Classify Document (Base64 Image)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"<base64-encoded-image>\",\n  \"content_type\": \"base64_image\",\n  \"filename\": \"document.png\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/classify",
              "host": ["{{baseUrl}}"],
              "path": ["classify"]
            }
          }
        },
        {
          "name": "Classify Document (URL)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"content\": \"https://example.com/document.png\",\n  \"content_type\": \"url\",\n  \"filename\": \"document.png\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/classify",
              "host": ["{{baseUrl}}"],
              "path": ["classify"]
            }
          }
        },
        {
          "name": "Batch Classification",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\n      \"content\": \"Invoice #123...\",\n      \"content_type\": \"text\"\n    },\n    {\n      \"content\": \"W-2 form data...\",\n      \"content_type\": \"text\"\n    }\n  ]\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/classify/batch",
              "host": ["{{baseUrl}}"],
              "path": ["classify", "batch"]
            }
          }
        },
        {
          "name": "Build Taxonomy",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"document_type\": \"W-2\",\n  \"extracted_data\": {\n    \"employer_name\": \"Acme Corp\",\n    \"wages\": 75000,\n    \"tax_year\": \"2024\"\n  }\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/taxonomy/build",
              "host": ["{{baseUrl}}"],
              "path": ["taxonomy", "build"]
            }
          }
        },
        {
          "name": "Webhook Classify (N8N)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "X-API-Key",
                "value": "{{apiKey}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"base64_content\": \"<base64-encoded-image>\",\n  \"filename\": \"document.png\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/webhook/classify",
              "host": ["{{baseUrl}}"],
              "path": ["webhook", "classify"]
            }
          }
        }
      ]
    },
    {
      "name": "Documents",
      "item": [
        {
          "name": "List Documents",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/documents?limit=20&offset=0",
              "host": ["{{baseUrl}}"],
              "path": ["documents"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                },
                {
                  "key": "offset",
                  "value": "0"
                }
              ]
            }
          }
        },
        {
          "name": "Get Document",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/documents/:id",
              "host": ["{{baseUrl}}"],
              "path": ["documents", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": ""
                }
              ]
            }
          }
        },
        {
          "name": "Delete Document",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/documents/:id",
              "host": ["{{baseUrl}}"],
              "path": ["documents", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": ""
                }
              ]
            }
          }
        },
        {
          "name": "Reprocess Document",
          "request": {
            "method": "POST",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/documents/:id/reprocess",
              "host": ["{{baseUrl}}"],
              "path": ["documents", ":id", "reprocess"],
              "variable": [
                {
                  "key": "id",
                  "value": ""
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Batch Processing",
      "item": [
        {
          "name": "Create Batch Job",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"items\": [\n    {\n      \"type\": \"document\",\n      \"data\": {\n        \"filename\": \"w2.png\",\n        \"base64_content\": \"<base64>\",\n        \"mime_type\": \"image/png\"\n      }\n    },\n    {\n      \"type\": \"audio\",\n      \"data\": {\n        \"filename\": \"recording.mp3\",\n        \"file_url\": \"https://example.com/audio.mp3\",\n        \"mime_type\": \"audio/mpeg\"\n      }\n    }\n  ],\n  \"priority\": 2\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/batch/process",
              "host": ["{{baseUrl}}"],
              "path": ["batch", "process"]
            }
          }
        },
        {
          "name": "Get Job Status",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/batch/jobs/:jobId",
              "host": ["{{baseUrl}}"],
              "path": ["batch", "jobs", ":jobId"],
              "variable": [
                {
                  "key": "jobId",
                  "value": ""
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Audio",
      "item": [
        {
          "name": "List Audio Transcriptions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/audio?limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["audio"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Get Audio Transcription",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/audio/:id",
              "host": ["{{baseUrl}}"],
              "path": ["audio", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": ""
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Text",
      "item": [
        {
          "name": "List Text Extractions",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/text?limit=20",
              "host": ["{{baseUrl}}"],
              "path": ["text"],
              "query": [
                {
                  "key": "limit",
                  "value": "20"
                }
              ]
            }
          }
        },
        {
          "name": "Get Text Extraction",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/text/:id",
              "host": ["{{baseUrl}}"],
              "path": ["text", ":id"],
              "variable": [
                {
                  "key": "id",
                  "value": ""
                }
              ]
            }
          }
        }
      ]
    },
    {
      "name": "Statistics",
      "item": [
        {
          "name": "Get Processing Stats",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/stats",
              "host": ["{{baseUrl}}"],
              "path": ["stats"]
            }
          }
        }
      ]
    }
  ]
}
